{{#section "styles"}}
  <link rel="stylesheet" href="/static/home.css" />
{{/section}}

<main class="pb-5">


  <!-- FEATURED -->
  <section class="py-5">
    <div class="container">
      <div class="section-heading text-center mb-5">
        <small>Featured</small>
        {{#if empty}}
        <div class="row">
        <h2 class="display-6">No results match "{{q}}"</h2>
        </div>
        {{else}}
        <h2 class="display-6">Search result for "{{q}}"</h2>
        <p class="text-muted mb-0"></p>
      </div>
      <form method="get" class="d-flex justify-content-end mb-3 align-items-center gap-2">
        <input type="hidden" name="q" value="{{q}}" />
        <label for="searchSortSelect" class="form-label mb-0 me-1">Sort by:</label>
        <select id="searchSortSelect" name="sort" class="form-select form-select-sm" onchange="this.form.submit()">
          <option value="">Default</option>
          <option value="rating">Rating</option>
          <option value="newest">Newest</option>
        </select>
      </form>
      <script>
        (function(){
          var sel = document.getElementById('searchSortSelect');
          if (sel) sel.value = '{{sort}}';
        })();
      </script>
      <div id="featuredCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="row g-4">
                {{#each courses}}
                <div class="col-md-6 col-xl-4 d-flex justify-content-center">
                    <div class="card" style="width: 18rem;">
                    {{#if thumbnail}}
                      <img src="{{thumbnail}}" alt="{{title}}" class="img-fluid w-100 h-100">
                    {{else}}
                      <img src="/static/imgs/course/{{courseid}}/main.jpg" alt="{{title}}" class="img-fluid w-100 h-100">
                    {{/if}}
                    <div class="card-body">
                        <h5 class="card-title">{{title}}</h5>
                        <p class="card-text">{{tinydes}}</p>
                        {{{ renderStars this.rating }}}
                        
                    </div>
                    <div>
                      {{#if this.isTopView}}
                          <span class="badge text-bg-warning">üî• Top Viewed</span>
                        {{/if}}
                        {{#if this.isTopEnroll}}
                          <span class="badge text-bg-primary">‚≠ê Top Enrolled</span>
                        {{/if}}
                    </div>
                    <div class="card-footer">
                        <a
                        href="/course/{{courseid}}"
                        class="btn btn-sm btn-outline-primary"
                        >
                        <i class="bi bi-eye"></i>
                        View Details
                        </a>
                        <form action="/account/add-cart" method="post">
                      <input type="hidden" name="courseid" value="{{courseid}}" />
                        <button type="submit" class="btn btn-sm btn-outline-success">
                          <i class="bi bi-cart-plus"></i> Add to Cart
                        </button>
                      </form>

                      <form action="/account/add" method="post">
                        <input type="hidden" name="courseid" value="{{this.courseid}}" />
                          <button type="submit" class="btn btn-sm btn btn-outline-danger">
                            <i class="bi bi-heart"></i> Add to watchlist
                          </button>
                        </form>
                    </div>
                    
                </div>
              </div>
                {{/each}}
                {{/if}}
            </div>
          </div>
        </div>
        {{!-- pagination --}}
        <nav aria-label="..." class="mt-3">
        <ul class="pagination">
            <li class="page-item {{#if isFirstPage}}disabled{{/if}}">
            <a class="page-link" href="/course/search?q={{q}}&sort={{sort}}&page={{prevPage}}" tabindex="-1">Previous</a>
            </li>
            {{#each pages}}
            {{#if isCurrent}}
                <li class="page-item active" aria-current="page">
                <a class="page-link" href="javascript:void(0);">
                    {{value}}
                </a>
                </li>
            {{else}}
                <li class="page-item">
                <a class="page-link" href="/course/search?q={{../q}}&sort={{../sort}}&page={{value}}">
                    {{value}}
                </a>
                </li>
            {{/if}}
            {{/each}}
            <li class="page-item {{#if isLastPage}}disabled{{/if}}">
            <a class="page-link" href="/course/search?q={{q}}&sort={{sort}}&page={{nextPage}}">Next</a>
            </li>
        </ul>
        </nav>
      </div>
    </div>
  </section>


</main>